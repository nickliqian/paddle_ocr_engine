# paddle_ocr_engine
飞桨paddle ocr部署脚本，对官方的脚本中存在的bug、需要配置的项、下载速度，做了进一步的优化。


## 构建镜像
```bash
git clone https://github.com/nickliqian/paddle_ocr_engine.git
cd docker/cpu-avx
docker build -t ppocr:cpu-avx .
```

## 启动容器
```bash
docker run -dt -p 8868:8866 --name ppocr ppocr:cpu-avx
```

## 验证效果
```bash
pip3 install -r requirements.txt
python test_ocr.py
```
执行验证脚本后，返回结果：
```
[{'confidence': 0.9374232292175293, 'text': '职工年终奖发放表', 'text_region': [[289, 11], [530, 11], [530, 38], [289, 38]]}, {'confidence': 0.9975035190582275, 'text': '部门', 'text_region': [[68, 72], [103, 72], [103, 90], [68, 90]]}, {'confidence': 0.9973451495170593, 'text': '员工姓名', 'text_region': [[155, 72], [222, 72], [222, 89], [155, 89]]}, {'confidence': 0.9942436218261719, 'text': '奖金基数', 'text_region': [[246, 72], [312, 72], [312, 89], [246, 89]]}, {'confidence': 0.9827634692192078, 'text': '入职日', 'text_region': [[343, 72], [395, 72], [395, 89], [343, 89]]}, {'confidence': 0.9866071343421936, 'text': '绩效系数', 'text_region': [[430, 72], [499, 72], [499, 89], [430, 89]]}, {'confidence': 0.9463087320327759, 'text': '应缴所得税', 'text_region': [[615, 70], [701, 72], [700, 89], [614, 87]]}, {'confidence': 0.9833318591117859, 'text': '应发金额', 'text_region': [[520, 73], [586, 73], [586, 87], [520, 87]]}, {'confidence': 0.9977885484695435, 'text': '号', 'text_region': [[5, 79], [29, 79], [29, 101], [5, 101]]}, {'confidence': 0.9963198900222778, 'text': '实发金额', 'text_region': [[732, 72], [800, 72], [800, 89], [732, 89]]}, {'confidence': 0.994633674621582, 'text': '10000', 'text_region': [[256, 114], [304, 114], [304, 130], [256, 130]]}, {'confidence': 0.9898374080657959, 'text': '2012/7/26', 'text_region': [[331, 114], [411, 114], [411, 130], [331, 130]]}, {'confidence': 0.99241042137146, 'text': '1.2', 'text_region': [[448, 113], [475, 113], [475, 131], [448, 131]]}, {'confidence': 0.9556819200515747, 'text': '12,000.00', 'text_region': [[520, 114], [595, 114], [595, 130], [520, 130]]}, {'confidence': 0.9942463040351868, 'text': '360.00', 'text_region': [[651, 114], [704, 111], [705, 128], [652, 131]]}, {'confidence': 0.9943594932556152, 'text': '销售部', 'text_region': [[61, 115], [114, 115], [114, 131], [61, 131]]}, {'confidence': 0.6665911078453064, 'text': '1', 'text_region': [[6, 117], [19, 111], [26, 126], [14, 132]]}, {'confidence': 0.9407235383987427, 'text': '11.640.00', 'text_region': [[735, 114], [813, 114], [813, 130], [735, 130]]}, {'confidence': 0.9886273145675659, 'text': '6000', 'text_region': [[259, 146], [300, 146], [300, 163], [259, 163]]}, {'confidence': 0.9169309735298157, 'text': '1.1', 'text_region': [[448, 145], [474, 145], [474, 164], [448, 164]]}, {'confidence': 0.9424547553062439, 'text': '6,600.00', 'text_region': [[526, 146], [596, 144], [597, 161], [527, 163]]}, {'confidence': 0.9982002377510071, 'text': '总经办', 'text_region': [[60, 147], [112, 147], [112, 164], [60, 164]]}, {'confidence': 0.9962562918663025, 'text': '2011/3/10', 'text_region': [[333, 148], [410, 148], [410, 162], [333, 162]]}, {'confidence': 0.9818909764289856, 'text': '198.00', 'text_region': [[653, 146], [704, 146], [704, 163], [653, 163]]}, {'confidence': 0.9546551704406738, 'text': '6.402.00', 'text_region': [[745, 148], [812, 148], [812, 162], [745, 162]]}, {'confidence': 0.9597512483596802, 'text': '3', 'text_region': [[14, 177], [28, 186], [18, 201], [4, 192]]}, {'confidence': 0.9995642304420471, 'text': '生产部', 'text_region': [[59, 179], [115, 179], [115, 200], [59, 200]]}, {'confidence': 0.9368303418159485, 'text': '1.0', 'text_region': [[448, 179], [474, 179], [474, 199], [448, 199]]}, {'confidence': 0.9881949424743652, 'text': '6000', 'text_region': [[259, 180], [298, 180], [298, 197], [259, 197]]}, {'confidence': 0.9954251050949097, 'text': '2011/5/23', 'text_region': [[331, 180], [411, 180], [411, 197], [331, 197]]}, {'confidence': 0.9448965191841125, 'text': '6,000.00', 'text_region': [[528, 180], [595, 180], [595, 197], [528, 197]]}, {'confidence': 0.9935328364372253, 'text': '180.00', 'text_region': [[653, 179], [705, 179], [705, 196], [653, 196]]}, {'confidence': 0.5307743549346924, 'text': '水*冰水', 'text_region': [[172, 181], [208, 181], [208, 199], [172, 199]]}, {'confidence': 0.9124050140380859, 'text': '5,820.00', 'text_region': [[744, 180], [812, 180], [812, 197], [744, 197]]}, {'confidence': 0.9995900988578796, 'text': '行政部', 'text_region': [[60, 211], [113, 214], [112, 231], [59, 229]]}, {'confidence': 0.9984723925590515, 'text': '4', 'text_region': [[5, 212], [29, 212], [29, 232], [5, 232]]}, {'confidence': 0.9894664287567139, 'text': '6000', 'text_region': [[259, 212], [299, 212], [299, 229], [259, 229]]}, {'confidence': 0.9925877451896667, 'text': '2013/8/26', 'text_region': [[330, 211], [411, 211], [411, 231], [330, 231]]}, {'confidence': 0.9829521775245667, 'text': '1.0', 'text_region': [[448, 212], [474, 212], [474, 231], [448, 231]]}, {'confidence': 0.91719651222229, 'text': '6.000.00', 'text_region': [[526, 213], [595, 210], [596, 227], [527, 229]]}, {'confidence': 0.9886181354522705, 'text': '180.00', 'text_region': [[653, 212], [704, 212], [704, 229], [653, 229]]}, {'confidence': 0.8899581432342529, 'text': '5,820.00', 'text_region': [[744, 213], [813, 213], [813, 230], [744, 230]]}, {'confidence': 0.981678307056427, 'text': '1.5', 'text_region': [[447, 246], [474, 246], [474, 265], [447, 265]]}, {'confidence': 0.9556774497032166, 'text': '15,000.00', 'text_region': [[519, 246], [594, 246], [594, 263], [519, 263]]}, {'confidence': 0.8786370754241943, 'text': '5', 'text_region': [[9, 247], [26, 247], [26, 265], [9, 265]]}, {'confidence': 0.994362473487854, 'text': '生产副总', 'text_region': [[52, 247], [119, 247], [119, 264], [52, 264]]}, {'confidence': 0.9923396110534668, 'text': '10000', 'text_region': [[257, 247], [303, 247], [303, 261], [257, 261]]}, {'confidence': 0.9831732511520386, 'text': '2014/4/20', 'text_region': [[332, 247], [410, 247], [410, 261], [332, 261]]}, {'confidence': 0.9917349815368652, 'text': '450.00', 'text_region': [[651, 245], [704, 245], [704, 262], [651, 262]]}, {'confidence': 0.9508544206619263, 'text': '14.550.00', 'text_region': [[738, 248], [811, 248], [811, 262], [738, 262]]}, {'confidence': 0.6817018389701843, 'text': '6', 'text_region': [[12, 272], [31, 284], [19, 302], [1, 290]]}, {'confidence': 0.9913914799690247, 'text': '2010/9/26', 'text_region': [[330, 277], [411, 280], [411, 297], [330, 294]]}, {'confidence': 0.9910868406295776, 'text': '6000', 'text_region': [[259, 279], [299, 279], [299, 295], [259, 295]]}, {'confidence': 0.9919628500938416, 'text': '1.0', 'text_region': [[448, 279], [475, 279], [475, 297], [448, 297]]}, {'confidence': 0.9329615831375122, 'text': '6,000.00', 'text_region': [[527, 279], [595, 279], [595, 295], [527, 295]]}, {'confidence': 0.9955455660820007, 'text': '采购', 'text_region': [[67, 280], [105, 280], [105, 297], [67, 297]]}, {'confidence': 0.990607738494873, 'text': '180.00', 'text_region': [[651, 278], [704, 276], [705, 294], [651, 295]]}, {'confidence': 0.9907617568969727, 'text': '5820.00', 'text_region': [[744, 280], [811, 280], [811, 296], [744, 296]]}, {'confidence': 0.9924523830413818, 'text': '6000', 'text_region': [[258, 311], [300, 311], [300, 329], [258, 329]]}, {'confidence': 0.8946161866188049, 'text': '1.3', 'text_region': [[448, 311], [474, 311], [474, 330], [448, 330]]}, {'confidence': 0.9857273101806641, 'text': '7800.00', 'text_region': [[528, 311], [596, 311], [596, 328], [528, 328]]}, {'confidence': 0.9993724822998047, 'text': '技术部', 'text_region': [[60, 312], [113, 312], [113, 330], [60, 330]]}, {'confidence': 0.99318927526474, 'text': '2014/7/18', 'text_region': [[331, 312], [411, 312], [411, 329], [331, 329]]}, {'confidence': 0.9820446968078613, 'text': '234.00', 'text_region': [[651, 311], [705, 311], [705, 329], [651, 329]]}, {'confidence': 0.9842300415039062, 'text': '7566.00', 'text_region': [[744, 312], [812, 312], [812, 329], [744, 329]]}, {'confidence': 0.9590668082237244, 'text': '1.7', 'text_region': [[447, 344], [474, 344], [474, 363], [447, 363]]}, {'confidence': 0.9847484827041626, 'text': '2016/7/1', 'text_region': [[337, 345], [405, 345], [405, 362], [337, 362]]}, {'confidence': 0.9536605477333069, 'text': '17,000.00', 'text_region': [[521, 345], [596, 345], [596, 362], [521, 362]]}, {'confidence': 0.9933154582977295, 'text': '510.00', 'text_region': [[651, 344], [706, 344], [706, 361], [651, 361]]}, {'confidence': 0.9990209341049194, 'text': '财务部经理', 'text_region': [[44, 346], [127, 346], [127, 363], [44, 363]]}, {'confidence': 0.9938895106315613, 'text': '10000', 'text_region': [[257, 346], [303, 346], [303, 360], [257, 360]]}, {'confidence': 0.9651978015899658, 'text': '16,490.00', 'text_region': [[737, 345], [812, 345], [812, 362], [737, 362]]}, {'confidence': 0.5357098579406738, 'text': '9', 'text_region': [[15, 372], [30, 382], [18, 400], [3, 389]]}, {'confidence': 0.9717289805412292, 'text': '2.0', 'text_region': [[448, 375], [475, 375], [475, 394], [448, 394]]}, {'confidence': 0.9468097686767578, 'text': '20,000.00', 'text_region': [[518, 376], [595, 376], [595, 393], [518, 393]]}, {'confidence': 0.9208781719207764, 'text': '1.925.00', 'text_region': [[638, 376], [705, 376], [705, 393], [638, 393]]}, {'confidence': 0.9948495626449585, 'text': '10000', 'text_region': [[257, 377], [303, 377], [303, 391], [257, 391]]}, {'confidence': 0.9960324764251709, 'text': '公司副总', 'text_region': [[52, 378], [118, 377], [119, 395], [53, 396]]}, {'confidence': 0.995781660079956, 'text': '2009/8/31', 'text_region': [[332, 379], [407, 379], [407, 393], [332, 393]]}, {'confidence': 0.9470840096473694, 'text': '18,075.00', 'text_region': [[735, 376], [812, 375], [812, 392], [735, 393]]}, {'confidence': 0.9974651336669922, 'text': '10', 'text_region': [[6, 409], [30, 409], [30, 429], [6, 429]]}, {'confidence': 0.997602105140686, 'text': '11', 'text_region': [[6, 443], [30, 443], [30, 462], [6, 462]]}, {'confidence': 0.9986597299575806, 'text': '12', 'text_region': [[6, 474], [30, 474], [30, 497], [6, 497]]}, {'confidence': 0.9967902302742004, 'text': '13', 'text_region': [[6, 507], [31, 507], [31, 528], [6, 528]]}, {'confidence': 0.9936092495918274, 'text': '合计', 'text_region': [[43, 541], [97, 541], [97, 562], [43, 562]]}, {'confidence': 0.9509989023208618, 'text': '70,000.0', 'text_region': [[245, 541], [310, 541], [310, 558], [245, 558]]}, {'confidence': 0.9203135967254639, 'text': '96,400.0', 'text_region': [[528, 542], [596, 539], [597, 556], [529, 558]]}, {'confidence': 0.8761880993843079, 'text': '4.217.0', 'text_region': [[650, 541], [707, 541], [707, 558], [650, 558]]}, {'confidence': 0.9119448661804199, 'text': '92.183.0', 'text_region': [[745, 543], [813, 540], [813, 557], [745, 559]]}]
draw boxes and texts!
The visualized image saved in ./server_results/155.jpeg
```
同时，在`server_results`目录下可以看到识别结果的图片`154.jpg`：
![result](server_results/155.jpeg)